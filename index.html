<!DOCTYPE html>
<!-- 
  @fileoverview Structure principale de l'application Todo List
  @author flozze
  @version 2.0.0
  @description Application de gestion de t√¢ches avec stockage local et interface utilisateur interactive
-->

<html lang="fr">
  <head>
    <!-- M√©tadonn√©es et configuration de base -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flozze - To do list</title>

    <!-- Ressources externes -->
    <link rel="stylesheet" href="./css/style.css" />
    <!-- Flag Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.3.2/css/flag-icons.min.css" />
    <!-- i18next pour l'internationalisation -->
    <script src="https://unpkg.com/i18next@23.7.6/dist/umd/i18next.min.js"></script>
    <script defer type="module" src="./js/index.js"></script>
  </head>
  <body>
    <!-- Particules anim√©es en arri√®re-plan -->
    <div class="particles" id="particles"></div>

    <!-- S√©lecteur de langue -->
    <div class="language-selector-container">
      <button id="languageSelector" class="language-selector" aria-label="Changer la langue">
        <span class="fi" id="currentLanguageFlag"></span>
        <span class="language-text" id="languageText">Fran√ßais</span>
      </button>
      <div class="language-dropdown" id="languageDropdown">
        <button class="language-option" data-lang="fr">
          <span class="fi fi-fr"></span>
          <span>Fran√ßais</span>
        </button>
        <button class="language-option" data-lang="en">
          <span class="fi fi-gb"></span>
          <span>English</span>
        </button>
        <button class="language-option" data-lang="de">
          <span class="fi fi-de"></span>
          <span>Deutsch</span>
        </button>
        <button class="language-option" data-lang="es">
          <span class="fi fi-es"></span>
          <span>Espa√±ol</span>
        </button>
      </div>
    </div>

    <!-- Bouton de retour -->
    <a href="https://app.flozze.fr" class="back-button" data-i18n-aria="backButton">
      <span class="back-arrow">‚Üê</span>
    </a>

    <!-- Conteneur principal -->
    <div class="container">
      <!-- Section Flozze avec image anim√©e -->
      <div class="flozze-container">
        <img src="./assets/flozzeWrite.png" alt="Flozze" class="flozze-image" id="flozzeImage">
      </div>

      <!-- En-t√™te de l'application -->
      <h1 data-i18n="title">To do list</h1>

      <!-- Section d'ajout de t√¢ches -->
      <form>
        <div id="add-task">
          <!-- 
            Champ de saisie pour les nouvelles t√¢ches
            @type {HTMLInputElement}
            @required - Emp√™che la soumission de t√¢ches vides
          -->
          <input
            id="taskInput"
            type="text"
            data-i18n-placeholder="addTaskPlaceholder"
            placeholder="Ajouter une t√¢che"
            required
            alt="Champ de saisie pour ajouter une nouvelle t√¢che"
          />

          <!-- 
            Bouton de soumission pour cr√©er une nouvelle t√¢che
            @type {HTMLButtonElement}
            @event submit - D√©clenche la cr√©ation de la t√¢che
          -->
          <button
            id="add"
            type="submit"
            alt="Bouton pour ajouter une nouvelle t√¢che"
          >
            +
          </button>
        </div>
      </form>

      <!-- 
        Conteneur dynamique pour la liste des t√¢ches
        @type {HTMLUListElement}
        @description Les t√¢ches seront inject√©es ici via JavaScript
      -->
      <ul id="taskList"></ul>

      <!-- Bas de page avec information sur le stockage -->
      <footer class="footer">
        <p class="footer-text" data-i18n="footerText">
          üíæ Vos t√¢ches sont stock√©es localement dans votre navigateur et sont uniques √† cet appareil. Aucune donn√©e n'est collect√©e ni transmise.
        </p>
      </footer>
    </div>

    <script>
      // Liste des images Flozze disponibles
      const flozzeImages = [
        './assets/flozzeWrite.png',
        './assets/flozzeConfuse.png',
        './assets/flozzeCry.png',
        './assets/flozzeFluff.png',
        './assets/flozzeInactive.png',
        './assets/flozzeLol.png',
        './assets/flozzeNerd.png',
        './assets/flozzeQuestion.png',
        './assets/flozzeThumbs.png'
      ];

      let currentImageIndex = 0;
      const flozzeImage = document.getElementById('flozzeImage');

      // Changer l'image toutes les 3 secondes
      function changeFlozzeImage() {
        currentImageIndex = (currentImageIndex + 1) % flozzeImages.length;
        flozzeImage.style.opacity = '0';
        
        setTimeout(() => {
          flozzeImage.src = flozzeImages[currentImageIndex];
          flozzeImage.style.opacity = '1';
        }, 300);
      }

      // Animation au clic sur l'image
      if (flozzeImage) {
        flozzeImage.addEventListener('click', () => {
          flozzeImage.style.animation = 'none';
          setTimeout(() => {
            flozzeImage.style.animation = 'bounce 0.5s ease-in-out';
          }, 10);
          changeFlozzeImage();
        });

        // Changer automatiquement l'image
        setInterval(changeFlozzeImage, 3000);

        // Effet de transition douce pour l'image
        flozzeImage.style.transition = 'opacity 0.3s ease-in-out';
      }

      // Cr√©er des particules anim√©es
      function createParticles() {
        const particlesContainer = document.getElementById('particles');
        if (!particlesContainer) return;
        
        const particleCount = 20;

        for (let i = 0; i < particleCount; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          
          const size = Math.random() * 10 + 5;
          particle.style.width = size + 'px';
          particle.style.height = size + 'px';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.top = Math.random() * 100 + '%';
          particle.style.animationDelay = Math.random() * 15 + 's';
          particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
          
          particlesContainer.appendChild(particle);
        }
      }

      // Effet de parallaxe au mouvement de la souris
      document.addEventListener('mousemove', (e) => {
        const container = document.querySelector('.container');
        if (container) {
          const x = (e.clientX / window.innerWidth - 0.5) * 10;
          const y = (e.clientY / window.innerHeight - 0.5) * 10;
          
          container.style.transform = `translate(${x}px, ${y}px)`;
        }
      });

      // Initialiser les particules au chargement
      window.addEventListener('load', () => {
        createParticles();
        
        // Animation d'entr√©e
        if (flozzeImage) {
          flozzeImage.style.opacity = '0';
          setTimeout(() => {
            flozzeImage.style.transition = 'opacity 1s ease-in';
            flozzeImage.style.opacity = '1';
          }, 100);
        }
      });
    </script>
  </body>
</html>
