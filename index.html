<!DOCTYPE html>
<!-- 
  @fileoverview Structure principale de l'application Todo List
  @author flozze
  @version 2.0.0
  @description Application de gestion de tÃ¢ches avec stockage local et interface utilisateur interactive
-->

<html lang="fr">
  <head>
    <!-- MÃ©tadonnÃ©es et configuration de base -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flozze - To do list</title>

    <!-- Ressources externes -->
    <link rel="stylesheet" href="./css/style.css" />
    <!-- i18next pour l'internationalisation -->
    <script src="https://unpkg.com/i18next@23.7.6/dist/umd/i18next.min.js"></script>
    <script defer type="module" src="./js/index.js"></script>
  </head>
  <body>
    <!-- Particules animÃ©es en arriÃ¨re-plan -->
    <div class="particles" id="particles"></div>

    <!-- SÃ©lecteur de langue -->
    <div class="language-selector-container">
      <button id="languageSelector" class="language-selector" aria-label="Changer la langue">
        ğŸ‡«ğŸ‡· FranÃ§ais
      </button>
      <div class="language-dropdown" id="languageDropdown">
        <button class="language-option" data-lang="fr">ğŸ‡«ğŸ‡· FranÃ§ais</button>
        <button class="language-option" data-lang="en">ğŸ‡¬ğŸ‡§ English</button>
        <button class="language-option" data-lang="de">ğŸ‡©ğŸ‡ª Deutsch</button>
        <button class="language-option" data-lang="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</button>
      </div>
    </div>

    <!-- Bouton de retour -->
    <a href="https://app.flozze.fr" class="back-button" data-i18n-aria="backButton">
      <span class="back-arrow">â†</span>
    </a>

    <!-- Conteneur principal -->
    <div class="container">
      <!-- Section Flozze avec image animÃ©e -->
      <div class="flozze-container">
        <img src="./assets/flozzeWrite.png" alt="Flozze" class="flozze-image" id="flozzeImage">
      </div>

      <!-- En-tÃªte de l'application -->
      <h1 data-i18n="title">To do list</h1>

      <!-- Section d'ajout de tÃ¢ches -->
      <form>
        <div id="add-task">
          <!-- 
            Champ de saisie pour les nouvelles tÃ¢ches
            @type {HTMLInputElement}
            @required - EmpÃªche la soumission de tÃ¢ches vides
          -->
          <input
            id="taskInput"
            type="text"
            data-i18n-placeholder="addTaskPlaceholder"
            placeholder="Ajouter une tÃ¢che"
            required
            alt="Champ de saisie pour ajouter une nouvelle tÃ¢che"
          />

          <!-- 
            Bouton de soumission pour crÃ©er une nouvelle tÃ¢che
            @type {HTMLButtonElement}
            @event submit - DÃ©clenche la crÃ©ation de la tÃ¢che
          -->
          <button
            id="add"
            type="submit"
            alt="Bouton pour ajouter une nouvelle tÃ¢che"
          >
            +
          </button>
        </div>
      </form>

      <!-- 
        Conteneur dynamique pour la liste des tÃ¢ches
        @type {HTMLUListElement}
        @description Les tÃ¢ches seront injectÃ©es ici via JavaScript
      -->
      <ul id="taskList"></ul>

      <!-- Bas de page avec information sur le stockage -->
      <footer class="footer">
        <p class="footer-text" data-i18n="footerText">
          ğŸ’¾ Vos tÃ¢ches sont stockÃ©es localement dans votre navigateur et sont uniques Ã  cet appareil. Aucune donnÃ©e n'est collectÃ©e ni transmise.
        </p>
      </footer>
    </div>

    <script>
      // Liste des images Flozze disponibles
      const flozzeImages = [
        './assets/flozzeWrite.png',
        './assets/flozzeConfuse.png',
        './assets/flozzeCry.png',
        './assets/flozzeFluff.png',
        './assets/flozzeInactive.png',
        './assets/flozzeLol.png',
        './assets/flozzeNerd.png',
        './assets/flozzeQuestion.png',
        './assets/flozzeThumbs.png'
      ];

      let currentImageIndex = 0;
      const flozzeImage = document.getElementById('flozzeImage');

      // Changer l'image toutes les 3 secondes
      function changeFlozzeImage() {
        currentImageIndex = (currentImageIndex + 1) % flozzeImages.length;
        flozzeImage.style.opacity = '0';
        
        setTimeout(() => {
          flozzeImage.src = flozzeImages[currentImageIndex];
          flozzeImage.style.opacity = '1';
        }, 300);
      }

      // Animation au clic sur l'image
      if (flozzeImage) {
        flozzeImage.addEventListener('click', () => {
          flozzeImage.style.animation = 'none';
          setTimeout(() => {
            flozzeImage.style.animation = 'bounce 0.5s ease-in-out';
          }, 10);
          changeFlozzeImage();
        });

        // Changer automatiquement l'image
        setInterval(changeFlozzeImage, 3000);

        // Effet de transition douce pour l'image
        flozzeImage.style.transition = 'opacity 0.3s ease-in-out';
      }

      // CrÃ©er des particules animÃ©es
      function createParticles() {
        const particlesContainer = document.getElementById('particles');
        if (!particlesContainer) return;
        
        const particleCount = 20;

        for (let i = 0; i < particleCount; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          
          const size = Math.random() * 10 + 5;
          particle.style.width = size + 'px';
          particle.style.height = size + 'px';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.top = Math.random() * 100 + '%';
          particle.style.animationDelay = Math.random() * 15 + 's';
          particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
          
          particlesContainer.appendChild(particle);
        }
      }

      // Effet de parallaxe au mouvement de la souris
      document.addEventListener('mousemove', (e) => {
        const container = document.querySelector('.container');
        if (container) {
          const x = (e.clientX / window.innerWidth - 0.5) * 10;
          const y = (e.clientY / window.innerHeight - 0.5) * 10;
          
          container.style.transform = `translate(${x}px, ${y}px)`;
        }
      });

      // Initialiser les particules au chargement
      window.addEventListener('load', () => {
        createParticles();
        
        // Animation d'entrÃ©e
        if (flozzeImage) {
          flozzeImage.style.opacity = '0';
          setTimeout(() => {
            flozzeImage.style.transition = 'opacity 1s ease-in';
            flozzeImage.style.opacity = '1';
          }, 100);
        }
      });
    </script>
  </body>
</html>
